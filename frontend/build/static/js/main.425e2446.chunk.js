(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{160:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(30),r=t.n(l),s=(t(80),t(24)),i=t(8);var m=function(){return c.a.createElement("nav",{className:"navbar"},c.a.createElement("div",{className:"navbar-brand"},c.a.createElement(s.b,{to:"/",className:"navbar-item"},"Filtr")))},o=t(9),u=t.n(o),p=t(13),b=t(3),g=t(26),d=t.n(g),v=function(e,a){return d.a.post(e,a)},h=function(e){var a=e.url,t=e.height,n=e.width;return d.a.post("".concat("/api","/images/"),{url:a,width:n,height:t})},f=function(e){return d.a.get("".concat("/api","/images/").concat(e,"/"))},E=function(e){return d.a.post("".concat("/api","/images/"),e)},N=t(6),y=t(21),j=t.n(y),k=t(73),O=t.n(k);var x=function(e){var a=e.handleChange,t=c.a.useState(!1),n=Object(b.a)(t,2),l=n[0],r=n[1],s=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),(n=new FormData).append("file",t.target.files[0]),n.append("upload_preset","emlerkwy"),e.next=6,v("https://api.cloudinary.com/v1_1/dx8pt11io/image/upload",n);case 6:c=e.sent,a(c.data);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"box"},c.a.createElement("section",{className:"Home columns"},c.a.createElement("div",{className:"left-side column"},c.a.createElement("div",{className:"img-one"}),c.a.createElement("div",{className:"filtr-one"}),c.a.createElement("div",{className:"img-two"}),c.a.createElement("div",{className:"filtr-two"}),c.a.createElement("div",{className:"img-three"}),c.a.createElement("div",{className:"filtr-three"})),c.a.createElement("div",{className:"right-side column columns is-multiline"},c.a.createElement("div",{className:"column right-top is-full"},c.a.createElement("h1",null,"Filtr"),c.a.createElement("h2",null,"Create Beautiful Images Instantly")),c.a.createElement("div",{className:"right-btm column is-full"},!l&&c.a.createElement("label",{className:"upload"},"Upload an Image",c.a.createElement("input",{className:"input",type:"file",onChange:s})),l&&c.a.createElement(j.a,{active:l,spinner:c.a.createElement(O.a,null),styles:{spinner:function(e){return Object(N.a)(Object(N.a)({},e),{},{width:"100px","& svg circle":{stroke:"rgba(0, 0, 0, 1)"}})}},className:"loading"})))))};var C=function(){var e=Object(i.f)(),a=c.a.useState(null),t=Object(b.a)(a,2),n=t[0],l=t[1];return c.a.useEffect((function(){(function(){var a=Object(p.a)(u.a.mark((function a(){var t;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,null===n){a.next=6;break}return a.next=4,h(n);case 4:t=a.sent,e.push("/edit/".concat(t.data.id));case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0.response);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}})()()}),[n,e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(x,{handleChange:function(e){var a=e.url,t=e.width,n=e.height;l({url:a,width:t,height:n})}}))},w=t(25);var S=function(e){var a=e.liveChange,t=e.feedback,n=(e.reset,function(e){var n="checkbox"===e.target.type?e.target.checked:e.target.value;a(Object(N.a)(Object(N.a)({},t),{},Object(w.a)({},e.target.name,"checkbox"===e.target.type?n:parseFloat(n))))});return c.a.createElement("div",{className:"live-effects-wrap"},c.a.createElement("div",{className:"live-effects"},c.a.createElement("div",{className:"sliders"},c.a.createElement("div",{className:"field"},c.a.createElement("input",{step:"0.2",min:"0",max:"100",name:"blur",value:t.blur,onChange:n,type:"range"}),c.a.createElement("label",{className:"label"},"Blur")),c.a.createElement("div",{className:"field"},c.a.createElement("input",{step:"0.01",min:"-1",max:"1",name:"brightness",value:t.brightness,onChange:n,type:"range"}),c.a.createElement("label",{className:"label"},"Brightness")),c.a.createElement("div",{className:"field"},c.a.createElement("input",{step:"1",min:"-80",max:"100",name:"contrast",value:t.contrast,onChange:n,type:"range"}),c.a.createElement("label",{className:"label"},"Contrast")),c.a.createElement("div",{className:"field"},c.a.createElement("input",{step:"0.01",min:"0",max:"20",name:"enhance",value:t.enhance,onChange:n,type:"range"}),c.a.createElement("label",{className:"label"},"Enhance")),c.a.createElement("div",{className:"field"},c.a.createElement("input",{step:"1",min:"0",max:"255",name:"hue",value:t.hue,onChange:n,type:"range"}),c.a.createElement("label",{className:"label"},"Hue")),c.a.createElement("div",{className:"field"},c.a.createElement("input",{step:"0.01",min:"0",max:"4",name:"saturation",value:t.saturation,onChange:n,type:"range"}),c.a.createElement("label",{className:"label"},"Saturation")),c.a.createElement("div",{className:"field"},c.a.createElement("input",{step:"0.01",min:"-1",max:"1",name:"luminance",value:t.luminance,onChange:n,type:"range"}),c.a.createElement("label",{className:"label"},"Luminance")),c.a.createElement("div",{className:"field display-none"},c.a.createElement("input",{step:"0.01",min:"-2",max:"2",name:"embossStrength",value:t.embossStrength,onChange:n,type:"range"}),c.a.createElement("label",{className:"label"},"Emboss Level")))))};var F=function(e){var a=e.liveChange,t=e.feedback,n=function(e){var n="checkbox"===e.target.type?e.target.checked:e.target.value;a(Object(N.a)(Object(N.a)({},t),{},Object(w.a)({},e.target.name,"checkbox"===e.target.type?n:parseFloat(n))))};return c.a.createElement("div",{className:"live-effects columns is-multiline"},c.a.createElement("div",{className:"column checkboxes"},c.a.createElement("div",{className:"column"},c.a.createElement("label",{className:"label"},"Sepia"),c.a.createElement("input",{type:"checkbox",name:"sepiaActive",checked:t.sepiaActive,onChange:n})),c.a.createElement("div",{className:"column"},c.a.createElement("label",{className:"label"},"Invert"),c.a.createElement("input",{type:"checkbox",name:"invertActive",checked:t.invertActive,onChange:n})),c.a.createElement("div",{className:"column"},c.a.createElement("label",{className:"label"},"Grayscale"),c.a.createElement("input",{type:"checkbox",name:"grayscaleActive",checked:t.grayscaleActive,onChange:n})),c.a.createElement("div",{className:"column"},c.a.createElement("label",{className:"label"},"Emboss"),c.a.createElement("input",{type:"checkbox",name:"embossActive",checked:t.embossActive,onChange:n}))))},I=t(32),A=t.n(I);var B=function(e){var a=e.url,t=e.handleImageChange,l=e.handleIconChange,r=e.setPreviewLoading,s=Object(n.useState)([]),i=Object(b.a)(s,2),m=i[0],o=i[1],g=Object(n.useState)(1),v=Object(b.a)(g,2),h=v[0],f=v[1],y=Object(n.useState)("sketch"),k=Object(b.a)(y,2),O=k[0],x=k[1],C=Object(n.useState)(!1),w=Object(b.a)(C,2),S=w[0],F=w[1],I=Object(n.useState)(!0),B=Object(b.a)(I,2),D=B[0],T=B[1],L=Object(n.useState)(!1),_=Object(b.a)(L,2),R=_[0],P=_[1],M=function(e){"sketch"===O&&1===h&&"right"===e.currentTarget.value&&T(!1),"sketch"===O&&8===h&&"right"===e.currentTarget.value&&P(!0),"sketch"===O&&9===h&&"left"===e.currentTarget.value&&P(!1),"histogram"===O&&1===h&&"right"===e.currentTarget.value&&P(!0),2===h&&"left"===e.currentTarget.value&&(P(!1),T(!0)),"left"===e.currentTarget.value?f(h-1):(T(!1),f(h+1)),F(!0)},H=function(e){f(1),T(!0),P(!1),x(e.target.value),console.log(e.target.value)};Object(n.useEffect)((function(){(function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.prev=1,e.next=4,n={url:a,filter:O,page:h},d.a.post("".concat("/api","/images/thumbnails/"),n);case 4:t=e.sent,o(t.data),F(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}var n}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}})()()}),[a,h,O]);var U=function(){var e=Object(p.a)(u.a.mark((function e(n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,e.next=4,E({url:a,filter_type:O,filter_options:n.target.alt});case 4:c=e.sent,t(c.data.image),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}();return c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"filters"},!S&&"collage"!==O&&"emoji"!==O&&c.a.createElement("button",{className:D?"button filter btn-page arrow-disabled":"button filter btn-page",value:"left",onClick:D?null:M},c.a.createElement("i",{className:"fas fa-chevron-left"})),!S&&"emoji"!==O&&m.map((function(e){return c.a.createElement("img",{className:"filter",src:e.image,alt:e.option,key:e.option,onClick:U})})),!S&&"emoji"===O&&m.map((function(e){return c.a.createElement("img",{className:"filter emoji-thumbs",src:e.image,alt:e.option,key:e.option,draggable:"true",onDragStart:function(e){l(e.target.src)}})})),S&&c.a.createElement(j.a,{className:"loading",active:S,spinner:c.a.createElement(A.a,null),styles:{spinner:function(e){return Object(N.a)(Object(N.a)({},e),{},{width:"50px","& svg circle":{stroke:"rgba(0, 0, 0, 1)"}})}}}),!S&&"collage"!==O&&"emoji"!==O&&c.a.createElement("button",{className:R?"button btn-page filter arrow-disabled":"button btn-page filter",value:"right",onClick:R?null:M},c.a.createElement("i",{className:"fas fa-chevron-right",value:"right"}))),c.a.createElement("div",{className:"filter-type"},c.a.createElement("button",{className:"sketch"===O?"type-selected":"",onClick:H,value:"sketch"},"Tint"),c.a.createElement("button",{className:"histogram"===O?"type-selected":"",onClick:H,value:"histogram"},"Histogram"),c.a.createElement("button",{className:"collage"===O?"type-selected":"",onClick:H,value:"collage"},"Artist Brush"),c.a.createElement("button",{className:"emoji"===O?"type-selected":"",onClick:H,value:"emoji"},"Emoji")))};var D=function(e){var a=e.handleImageChange,t=e.image,n=e.handleClose,l=e.width,r=e.height,s=e.base64,i=e.id,m=c.a.useState(""),o=Object(b.a)(m,2),g=o[0],d=o[1],v=c.a.useState(""),h=Object(b.a)(v,2),f=h[0],N=h[1],y=function(e){"topText"===e.target.name?d(e.target.value):N(e.target.value)},j=function(){var e=Object(p.a)(u.a.mark((function e(){var n,c,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(g.toUpperCase(),"\xa9\u03c0").concat(f.toUpperCase()),c=s?"".concat(i,"&&").concat(l,"&&").concat(r,"&&").concat(s):t,e.next=4,E({url:c,filter_type:"meme",filter_options:n});case 4:m=e.sent,a(m.data.image);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"MemeView"},c.a.createElement("div",{className:"columns is-multiline meme"},c.a.createElement("div",{className:"column right-meme columns is-multiline"},c.a.createElement("div",{className:"field column is-full"},c.a.createElement("p",{onClick:n},c.a.createElement("i",{className:"fas fa-times"}))),c.a.createElement("div",{className:"field column is-full"},c.a.createElement("input",{type:"text",className:"input",onChange:y,name:"topText",value:g,placeholder:"Enter top text"})),c.a.createElement("div",{className:"field column is-full"},c.a.createElement("input",{type:"text",className:"input",onChange:y,name:"bottomText",value:f,placeholder:"Enter bottom text"})),c.a.createElement("div",{className:"field column is-full"},c.a.createElement("div",{className:"save-btn button",onClick:j},"Meme it")))))},T=t(27),L=t(19),_=t.n(L),R=t(34),P=t.n(R),M=t(75),H=t(46),U=t.n(H);var G=function(e){var a=e.imageData,t=e.height,n=c.a.useState(""),l=Object(b.a)(n,2),r=l[0],s=l[1],i=c.a.useState(!0),m=Object(b.a)(i,2),o=m[0],g=m[1],d=c.a.useState(!1),h=Object(b.a)(d,2),f=h[0],E=h[1],y=c.a.useState(!1),k=Object(b.a)(y,2),O=k[0],x=k[1],C=c.a.useRef(null),w=c.a.useRef(null),S=function(){var e=Object(p.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("image upload ran"),e.prev=1,(t=new FormData).append("file",a),t.append("upload_preset","emlerkwy"),e.next=7,v("https://api.cloudinary.com/v1_1/dx8pt11io/image/upload",t);case 7:n=e.sent,s(n.data.secure_url),g(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.response);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();c.a.useEffect((function(){S(),g(!0)}),[a]);var F=function(e){"embedCopyBtn"===e.target.name?(C.current.select(),document.execCommand("copy"),E(!0),setTimeout((function(){E(!1)}),2e3)):"urlCopyBtn"===e.target.name&&(w.current.select(),document.execCommand("copy"),x(!0),setTimeout((function(){x(!1)}),2e3))};return console.log(f),c.a.createElement("div",{className:"SaveImage",style:{height:t}},c.a.createElement("div",{className:"columns is-multiline save-options"},c.a.createElement("div",{className:"field column is-full embed"},c.a.createElement("label",{className:"label"},"Embed"),!o&&c.a.createElement("input",{className:"animate-this",readOnly:!0,ref:C,type:"text",name:"embed",value:'<img src="'.concat(r,'" title="Edited with Filtr" alt="Edit your images with Filtr />')}),!o&&c.a.createElement("button",{className:f?"button-animate":"animate-button",name:"embedCopyBtn",onClick:F},f?"Copied!":"Copy Embed Info"),o&&c.a.createElement(j.a,{active:o,spinner:c.a.createElement(U.a,null),styles:{spinner:function(e){return Object(N.a)(Object(N.a)({},e),{},{width:"100px",height:"100px","& svg circle":{stroke:"rgba(0, 0, 0, 1)"}})}},className:"loading"})),c.a.createElement("div",{className:"field column is-full share"},c.a.createElement("label",{className:"label"},"Share"),!o&&c.a.createElement("input",{className:"animate-this",readOnly:!0,ref:w,type:"text",name:"url",value:r}),!o&&c.a.createElement("button",{className:O?"button-animate":"animate-button",onClick:F,name:"urlCopyBtn"},O?"Copied!":"Copy Link"),o&&c.a.createElement(j.a,{active:o,spinner:c.a.createElement(U.a,null),styles:{spinner:function(e){return Object(N.a)(Object(N.a)({},e),{},{width:"100px",height:"100px","& svg circle":{stroke:"rgba(0, 0, 0, 1)"}})}},className:"loading"})),c.a.createElement("div",{className:"field column is-full download"},c.a.createElement("label",{className:"label"},"Or simply..."),c.a.createElement("button",{onClick:function(){return Object(M.triggerBase64Download)(a,"Filtr_image")}},"Download"))))},J=function(e){var a=e.image,t=P()(a.src),n=Object(b.a)(t,1)[0];return c.a.createElement(T.Image,{image:n,x:a.x,y:a.y,height:40,width:40,draggable:"true"})};var q=function(){var e=Object(i.g)().id,a=c.a.useState(""),t=Object(b.a)(a,2),n=t[0],l=t[1],r=c.a.useState(null),s=Object(b.a)(r,2),m=s[0],o=s[1],g=c.a.useState(null),d=Object(b.a)(g,2),v=d[0],h=d[1],E=c.a.useState(null),y=Object(b.a)(E,2),k=y[0],O=y[1],x=c.a.useState(""),C=Object(b.a)(x,2),w=C[0],I=C[1],L=P()(w,"anonymous"),R=Object(b.a)(L,1)[0],M=c.a.useState(""),H=Object(b.a)(M,2),U=H[0],q=H[1],V=c.a.useState(!1),z=Object(b.a)(V,2),K=z[0],Q=z[1],W=c.a.useState(!1),X=Object(b.a)(W,2),Y=(X[0],X[1]),Z=c.a.useState(!1),$=Object(b.a)(Z,2),ee=$[0],ae=$[1],te=c.a.useRef(),ne=c.a.useRef(),ce=c.a.useState([]),le=Object(b.a)(ce,2),re=le[0],se=le[1],ie=c.a.useRef(),me=c.a.useRef(null),oe=c.a.useState(!1),ue=Object(b.a)(oe,2),pe=ue[0],be=ue[1],ge=c.a.useState({blur:0,brightness:0,embossStrength:.6,embossActive:!1,grayscaleActive:!1,enhance:0,alpha:1}),de=Object(b.a)(ge,2),ve=de[0],he=de[1],fe=c.a.useState(!0),Ee=Object(b.a)(fe,2),Ne=Ee[0],ye=Ee[1],je={blur:0,brightness:0,embossStrength:.6,embossActive:!1,grayscaleActive:!1,enhance:0,alpha:1},ke=c.a.useState(!1),Oe=Object(b.a)(ke,2),xe=Oe[0],Ce=Oe[1];c.a.useEffect((function(){(function(){var a=Object(p.a)(u.a.mark((function a(){var t;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f(e);case 3:t=a.sent,n||l(t.data.url),k||O(t.data.height),v||h(t.data.width),I(t.data.url),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0.response);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}})()()}),[e,k,n,v]),c.a.useEffect((function(){R&&(ne.current.cache(),ne.current.getLayer().batchDraw())}),[R]),c.a.useEffect((function(){console.log(me.current,"Parent Component")}));var we=function(e){ae(!0),o(e),I(e),be(!1)},Se=function(e){he(e),ae(!0)},Fe=function(){he(je),I(n),se([]),o("")};return c.a.createElement("div",{className:"ImageEdit"},c.a.createElement("div",{className:"box"},c.a.createElement("div",{className:"image-filter-box"},c.a.createElement("div",{className:K?"btn-editing":"buttons"},!K&&c.a.createElement("button",{className:"btn-meme",onClick:function(){Ce(!0)}},"Make it a Meme"),!K&&ee&&c.a.createElement("button",{className:"btn-reset",onClick:Fe},"Reset"),!K&&ee&&c.a.createElement("button",{className:"button-process",onClick:function(){!function(){var e=te.current.toDataURL();q(e)}(),Q(!0)}},"Save Image"),K&&c.a.createElement("button",{className:"button-process",onClick:function(){Q(!1)}},"Get back to Edit")),c.a.createElement("div",{className:"".concat(K?"edit-box-save":"edit-box"," ").concat(v===k?"equal-wh":v>k?"w-greater":"h-greater"),onDrop:function(e){te.current.setPointersPositions(e),se(re.concat([Object(N.a)(Object(N.a)({},te.current.getPointerPosition()),{},{src:ie.current})]))},onDragOver:function(e){return e.preventDefault()}},c.a.createElement("div",{className:"image"},!pe&&c.a.createElement(T.Stage,{width:v,height:k,ref:te,id:"stage"},c.a.createElement(T.Layer,null,c.a.createElement(T.Image,{ref:ne,width:v,height:k,onMouseEnter:function(){I(n),ye(!1),w===m&&Y(!0),console.log("mouse has entered")},onMouseLeave:function(){ye(!0),Y(!1),I(m),console.log("mouse has left")},x:0,y:0,image:R,filters:[_.a.Filters.Blur,_.a.Filters.Brighten,_.a.Filters.Contrast,_.a.Filters.Enhance,_.a.Filters.HSL,ve.sepiaActive&&Ne?_.a.Filters.Sepia:function(){},ve.embossActive&&Ne?_.a.Filters.Emboss:function(){},ve.grayscaleActive&&Ne?_.a.Filters.Grayscale:function(){},ve.invertActive&&Ne?_.a.Filters.Invert:function(){}],blurRadius:Ne?ve.blur:je.blur,brightness:Ne?ve.brightness:je.brightness,contrast:Ne?ve.contrast:je.contrast,embossStrength:Ne?ve.embossStrength:je.embossStrength,enhance:Ne?ve.enhance:je.enhance,hue:Ne?ve.hue:je.hue,saturation:Ne?ve.saturation:je.saturation,luminance:Ne?ve.luminance:je.luminance}),re.map((function(e,a){return c.a.createElement(J,{key:a,image:e})})))),pe&&c.a.createElement(j.a,{className:"loading-image",active:pe,spinner:c.a.createElement(A.a,null),styles:{spinner:function(e){return Object(N.a)(Object(N.a)({},e),{},{width:"50px","& svg circle":{stroke:"rgba(0, 0, 0, 1)"}})}}})),!pe&&!K&&c.a.createElement(F,{liveChange:Se,feedback:ve}),xe&&!K&&c.a.createElement(D,{width:v,height:k,image:n,handleImageChange:we,handleClose:function(){Ce(!1)},base64:m,id:e}),K&&c.a.createElement(G,{imageData:U,height:k})),c.a.createElement("div",{className:"side-by-side"},!K&&c.a.createElement(S,{liveChange:Se,reset:Fe,feedback:ve}),!K&&c.a.createElement(B,{url:n,handleImageChange:we,handleIconChange:function(e){ie.current=e},setPreviewLoading:be})))))};var V=function(){return c.a.createElement(s.a,null,c.a.createElement(m,null),c.a.createElement(i.c,null,c.a.createElement(i.a,{exact:!0,path:"/",component:C}),c.a.createElement(i.a,{exact:!0,path:"/edit/:id",component:q})))};r.a.render(c.a.createElement(V,null),document.getElementById("root"))},76:function(e,a,t){e.exports=t(160)},80:function(e,a,t){}},[[76,1,2]]]);
//# sourceMappingURL=main.425e2446.chunk.js.map